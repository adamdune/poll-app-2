(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{386:function(e,t,n){__NEXT_REGISTER_PAGE("/new",function(){return e.exports=n(387),{page:e.exports.default}})},387:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(14),i=n(71),l=n.n(i),c=n(4);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function p(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b=function(e){function t(){var e,n,a,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),p=0;p<o;p++)i[p]=arguments[p];return a=this,r=(e=m(t)).call.apply(e,[this].concat(i)),n=!r||"object"!==s(r)&&"function"!=typeof r?f(a):r,h(f(f(n)),"state",{options:2}),h(f(f(n)),"handleAddMoreOptions",function(e){e.preventDefault();var t=Object(c.f)(),a=document.createElement("div");a.id=t,a.classList="row my-0",a.innerHTML='\n        <div class="col s10 input-field pl-0 my-1">\n            <textarea class="materialize-textarea" data-length="256" name="input-option" id="input-option-'.concat(t,'"></textarea>\n            <label for="input-option-').concat(t,'">Additional Option</label>\n        </div>');var r=document.createElement("div");r.classList="col s2 input-field my-0";var o=document.createElement("button");o.className="btn red",o.innerHTML='<i class="material-icons">close</i>',o.addEventListener("click",function(){document.getElementById(t).remove();var e=n.state.options;n.setState({options:e-1})}),r.appendChild(o),a.appendChild(r),document.getElementById("more-options").appendChild(a);var i=n.state.options;i+1===32&&M.toast({html:"Maximum number of additional options reached!",classes:"yellow black-text",displayLength:6e3}),n.setState({options:i+1}),M.CharacterCounter.init(document.querySelectorAll("textarea#input-option-".concat(t)))}),h(f(f(n)),"handleSubmit",function(e){function t(e,t){M.toast({html:e,displayLength:t,classes:"red white-text"}),document.getElementById("btn-submit").disabled=!1}e.preventDefault(),document.getElementById("btn-submit").disabled=!0;var n=document.getElementById("input-title").value;if(!n)return t("The poll must have a Title",32e3);if(n.length>512)return t("The poll's Title cannot exceed 512 characters",6e3);var a=u(document.querySelectorAll('[name="input-option"]')).map(function(e){return e.value.trim()}).filter(function(e){return e});if(a.length<2)return t("The poll needs AT LEAST 2 valid options!",7e3);for(var r=0;r<a.length;r++)if(a[r].length>256)return t('The options "'.concat(a[r].name,'" has exceeded 256 characters'),7e3);for(var o=0;o<a.length-1;o++)for(var i=o+1;i<a.length;i++)if(a[o]===a[i])return t("The poll must NOT have 2 or more identical options!",7e3);M.toast({html:"Successs!!!1",classes:"green white-text"}),fetch("/api/polls",{method:"POST",body:JSON.stringify({title:n,options:a}),headers:{"Content-Type":"application/json"}}).then(function(e){if(200!==e.status||!e.redirected)return t("3200: Internal Server Error");l.a.push(e.url)}).catch(function(e){return console.log(e)})}),n}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,r.a.Component),n=t,(a=[{key:"componentDidMount",value:function(){M.CharacterCounter.init(document.querySelectorAll("textarea[data-length]"))}},{key:"render",value:function(){var e=this;return r.a.createElement(o.a,null,r.a.createElement("div",{className:"card mt-5"},r.a.createElement("div",{className:"card-content"},r.a.createElement("form",{className:"mt-32"},r.a.createElement("div",{className:"input-field"},r.a.createElement("textarea",{className:"materialize-textarea",id:"input-title",placeholder:"Title for the pole","data-length":"512"}),r.a.createElement("label",{htmlFor:"input-title",className:"active"},"Title")),r.a.createElement("div",{className:"input-field"},r.a.createElement("textarea",{className:"materialize-textarea",name:"input-option","data-length":"256"}),r.a.createElement("label",{htmlFor:"input-option-1"},"Option 1")),r.a.createElement("div",{className:"input-field"},r.a.createElement("textarea",{className:"materialize-textarea",name:"input-option","data-length":"256"}),r.a.createElement("label",{htmlFor:"input-option-2"},"Option 2")),r.a.createElement("div",{id:"more-options",className:"mb-2"}),r.a.createElement("button",{className:"btn waves-effect waves-light yellow black-text accent-4",disabled:!(this.state.options<32),onClick:function(t){return e.handleAddMoreOptions(t)}},r.a.createElement("i",{className:"material-icons left"},"add"),"Add More Options",this.state.options<32?" (".concat(32-this.state.options," left)"):null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("button",{className:"btn-large waves-effect waves-light yellow black-text accent-4",type:"submit",id:"btn-submit",onClick:function(t){return e.handleSubmit(t)}},"Submit")))))}}])&&p(n.prototype,a),i&&p(n,i),t}();t.default=b}},[[386,1,0]]]);