{"version":3,"file":"static/webpack/static\\development\\pages\\index.js.300c3be4ed9f14009a5f.hot-update.js","sources":["webpack:///./pages/index.js"],"sourcesContent":["import Layout from '../component/Layout';\r\nimport Pagination from '../component/Pagination';\r\nimport Sort from '../component/Sort';\r\nimport Polls_View from '../component/Polls_View';\r\nimport fetch from 'isomorphic-unfetch';\r\nimport { isEmptyArray, urlConfig } from '../utility';\r\nimport url from 'url';\r\n\r\nconst Index = (props) => {\r\n    return (\r\n        <Layout>\r\n            <Sort\r\n                pathname='/'\r\n                query={{ ...props.query }}\r\n                render={props.count > 1}\r\n            />\r\n            {isEmptyArray(props.polls) ?\r\n                <div className=\"center-align\">\r\n                    <h3>No polls are available at the moment.</h3>\r\n                </div>\r\n                :\r\n                <Polls_View polls={props.polls} />\r\n            }\r\n            <Pagination\r\n                pages={Math.ceil(props.count / 10)}\r\n                currentPage={props.query.page ? parseInt(props.query.page) : 1}\r\n                pathname='/'\r\n                query={{ ...props.query }}\r\n\r\n            />\r\n        </Layout>\r\n    );\r\n}\r\nIndex.getInitialProps = async ({ query }) => {\r\n    if (query.title) {\r\n        delete query.title;\r\n    }\r\n    const fetchUrl = url.format({\r\n        protocol: urlConfig.protocol,\r\n        host: urlConfig.host,\r\n        pathname: '/api/polls',\r\n        query: query\r\n    })\r\n    const res = await fetch(fetchUrl);\r\n    const data = await res.json();\r\n    return { polls: data.polls, count: data.count, query };\r\n}\r\n\r\nexport default Index;"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AAHA;AAMA;AAAA;AAIA;AAAA;AAGA;AACA;AACA;AACA;AAJA;AASA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAJA;AAJA;AAAA;AACA;AADA;AAUA;AAVA;AAAA;AACA;AADA;AAWA;AAXA;AAYA;AAAA;AAAA;AAAA;AACA;AAbA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AAcA;;;;;;;;;;;;;;;;;;;;;;;A","sourceRoot":""}